<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">

    <!-- FONT AWESOME 5.5.0 -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">

    <!-- MEDIA QUERY -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- BOOTSTRAP 4 -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"> -->

    <!-- VUE -->
    <script src="vue/vue.js" charset="utf-8"></script>

    <!-- AXIOS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.20.0/axios.min.js"></script>

    <!-- MY FUNCTIONS -->
    <script src="js/functions.js" charset="utf-8"></script>

    <title></title>
  </head>

  <body>
    <div id="root">

      <header class="flex-row jfy-between alg-center">
        <div class="logo">
          <img src="img/logo2.png" alt="">
        </div>

        <div class="search-header flex-row jfy-between">
          <span class="f-size-12">seleziona una categoria</span>
          <select class="mg-lt-10" v-model="category">
            <option value="film">Film</option>
            <option value="serie">Serie TV</option>
          </select>

          <input class="mg-lt-20" type="text" placeholder="Cerca" v-model="userSearch">
          <button class="mg-lt-20" @click="search"><i class="fas fa-search"></i></button>
        </div>

      </header>

      <div class="container">

        <div class="cards-container flex-row wrap">
          <div class="my-card" v-for="(film, index) in filmsInPage">

            <div class="poster">
              <!-- da mostrare se poster non presente -->
              <div v-if="film.poster_path == null" class="img-not-available flex-col alg-center jfy-center">
                <h2 v-if="currentCategory == 'film'" class="text-center">{{film.title}}</h2>
                <h2 v-else>{{film.name}}</h2>
                <img src="img/logo2.png" alt="logo">
              </div>

              <img v-else :src="`https://image.tmdb.org/t/p/original/${film.poster_path}`" alt="poster">
            </div>

            <div class="flex-col film-info">
              <!-- titolo -->
              <h1 v-if="currentCategory == 'film'">{{film.title}}</h1>
              <h1 v-else>{{film.name}}</h1>

              <div v-if="currentCategory == 'film'" :class="{displayNone: film.title == film.original_title}">
                <span class="f-size-12">Titolo originale:</span>
                <h2>{{film.original_title}}</h2>
              </div>

              <div v-else :class="{displayNone: film.name == film.original_name}">
                <span class="f-size-12">Titolo originale:</span>
                <h2>{{film.original_name}}</h2>
              </div>

              <!-- lingua -->
              <span class="label">Lingua:</span>
              <p v-if="flag(film) == 'notFound'">{{film.original_language}}</p>
              <img v-else class="flag" :src="flag(film)" alt="flag">
              <!-- stelle -->
              <span class="label">Voto:</span>
              <div class="stars">

                <!-- stella piena -->
                <span v-for="(star, index) in stars[index].stars">
                  <i class="fas fa-star yellow"></i>
                </span>
                <!-- mezza stella (se presente)-->
                <span v-for="(half, index) in stars[index].halfStar">
                  <i class="fas fa-star-half-alt yellow"></i>
                </span>
                <!-- stella vuota (se presente) -->
                <span v-for="(star, index) in 5 - (stars[index].stars + stars[index].halfStar)">
                  <i class="far fa-star"></i>
                </span>

              </div>
              <!-- overview -->
              <span class="label">Overview:</span>
              <p v-if="film.overview == ''">(Overview not available)</p>
              <p v-else>{{film.overview}}</p>
            </div>

          </div>
        </div>

        <div class="pagination-row flex-row alg-center jfy-center">
          <div class="pagination">
            <a href="#" :class="{displayNone : filmsInPage.length == 0}" @click="switchPrevious">&laquo;</a>

            <a href="#" v-for="(number, index) in displayedNav" :class="{active: number.pos == selectedPage}" @click="changePage(number, index)">{{number.pos}}</a>

            <a href="#" :class="{displayNone : filmsInPage.length == 0}" @click="switchFollowing">&raquo;</a>
          </div>
        </div>

      </div>
    </div>

    <!-- SCRIPT -->
    <script src="js/main.js" charset="utf-8"></script>
  </body>
</html>
